<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>{% if page.title %}{{ page.title }}{% else %}Scott Logic{% endif %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="alternate" type="application/atom+xml" href="{{ site.canonical.url }}/atom.xml" title="Scott Logic Blog">
    <link rel="canonical" href="{{ site.canonical.url }}{{ page.url | replace:'index.html',''}}">
    {% if site.github.owner_name != 'ScottLogic' %}<meta name="robots" content="noindex, nofollow">{% endif %}
    <script type="text/javascript" src="//use.typekit.net/fbo8hfs.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

    {% assign author      = site.data.authors.authors[page.author] %}
    {% assign pageImgUrl  = site.canonical.url | append: '/' | append: page.image %}
    {% assign gravatarUrl = 'http://www.gravatar.com/avatar/' | append: author.gravatar | append: '?s=200' %}
    {% assign slLogUrl    = site.canonical.url | append: '/assets/sl-dark.png' %}
    {% assign twitterHandleSize = author.twitter-url | size %}
    {% assign twitterHandle     = author.twitter-url | slice: 20, twitterHandleSize | strip %}

    {% capture ogImage %}{% if page.image %}{{ pageImgUrl }}{% else %}{% if author.gravatar %}{{ gravatarUrl }}{% else %}{{ slLogUrl }}{% endif %}{% endif %}{% endcapture %}
    {% capture ogDescription %}{% if page.summary %}{{ author.name }}: {{ page.summary }}{% else %}{{ author.name }}: {{ page.content | truncatewords: 15 | strip_html }}{% endif %}{% endcapture %}
    {% capture twitterCard %}{% if page.image %}summary_large_image{% else %}summary{% endif %}{% endcapture %}
    {% capture twitterCreator %}{% if author.twitter-url %}{{ twitterHandle }}{% else %}{{ site.twitter_handle }}{% endif %}{% endcapture %}

    {% comment %} OpenGraph MetaData - Twitter / Facebook {% endcomment%}
    <meta property="og:title" content="{{ page.title }}" />
    <meta property="og:description"content="{{ ogDescription }}"/>
    <meta property="og:image" content="{{ ogImage }}"/>
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="{{ site.name }}"/>
    <meta property="og:url" content="{{ site.canonical.url }}{{ page.url }}" />

    {% comment %} Twitter {% endcomment%}
    <meta name="twitter:card" content="{{ twitterCard }}"/>
    <meta name="twitter:site" content="@{{ site.twitter_handle }}"/>
    <meta name="twitter:creator" content="@{{ twitterCreator }}"/>

    <link rel="stylesheet" href="{{ site.github.url | remove_first: 'http:' }}/style.css" type="text/css">
    <link rel="icon" type="image/png" href="http://9hjqf9qs4q37zvw724c9urzc.wpengine.netdna-cdn.com/wp-content/themes/scott-logic/_img/favicon.png" />

    {% comment %} Only load analytics when on the main repo; it will fail to load on the forks {% endcomment %}
    {% if site.github.owner_name == 'ScottLogic' %}
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-262131-1']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>
    {% endif %}
</head>
<body>
<div class="page-content-background right hidden-md-down"></div>
<div class="page-content-background left hidden-md-down"></div>

{% include header.html %}
{{ content }}
{% unless page.paginated %}
{% include footer.html %}
{% endunless %}

<script src="{{ site.github.url | remove_first: 'http:' }}/script.js" type="text/javascript"></script>
<script type="text/javascript">jQuery.noConflict();</script>

{% if page.paginated %}
<script type="text/javascript">
jQuery('.content').jscroll({
  contentSelector: ".content",
  nextSelector: '.next',
  loadingHtml: '<div id="loadingSpinner"><div class="f_circleG" id="frotateG_01"></div><div class="f_circleG" id="frotateG_02"></div><div class="f_circleG" id="frotateG_03"></div><div class="f_circleG" id="frotateG_04"></div><div class="f_circleG" id="frotateG_05"></div><div class="f_circleG" id="frotateG_06"></div><div class="f_circleG" id="frotateG_07"></div><div class="f_circleG" id="frotateG_08"></div></div>',
  callback: function() {
    loadCommentCount();
    loadTweetCount();
    makeTimestampsRelative();
  }
});
</script>
{% endif %}
{% if site.github.owner_name == 'ScottLogic' %}
{% include remarketing.html %}
{% endif %}

</body>
</html>
